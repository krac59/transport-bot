import os
import sys
from pathlib import Path

# –ü—ã—Ç–∞–µ–º—Å—è –∑–∞–≥—Ä—É–∑–∏—Ç—å .env –µ—Å–ª–∏ –æ–Ω –µ—Å—Ç—å (–¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)
try:
    from dotenv import load_dotenv
    env_path = Path('.') / '.env'
    if env_path.exists():
        load_dotenv()
        print("‚úÖ –ó–∞–≥—Ä—É–∂–µ–Ω –ª–æ–∫–∞–ª—å–Ω—ã–π .env —Ñ–∞–π–ª")
except ImportError:
    print("‚ö†Ô∏è python-dotenv –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω, –∏—Å–ø–æ–ª—å–∑—É–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã")

# –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –±–æ—Ç–∞ - —Å–Ω–∞—á–∞–ª–∞ –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è, –ø–æ—Ç–æ–º –∏–∑ .env
BOT_TOKEN = os.getenv('BOT_TOKEN')
if not BOT_TOKEN:
    print("‚ùå –ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –û–®–ò–ë–ö–ê: BOT_TOKEN –Ω–µ –Ω–∞–π–¥–µ–Ω!")
    print("üìã –î–ª—è bothost.ru –¥–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é BOT_TOKEN –≤ –ø–∞–Ω–µ–ª–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è")
    print("üìã –î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª .env —Å BOT_TOKEN=–≤–∞—à_—Ç–æ–∫–µ–Ω")
    raise ValueError("BOT_TOKEN not set in environment variables")

MAIN_ADMIN = int(os.getenv('MAIN_ADMIN', '0'))
if MAIN_ADMIN == 0:
    print("‚ö†Ô∏è –í–ù–ò–ú–ê–ù–ò–ï: MAIN_ADMIN –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω, –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –±—É–¥–µ—Ç –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞")
    print("üìã –î–æ–±–∞–≤—å—Ç–µ MAIN_ADMIN –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è")

# –ö–ª—é—á–∏ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è
SECRET_KEY = os.getenv('SECRET_KEY', 'default-secret-key-change-me')
ENCRYPTION_KEY = os.getenv('ENCRYPTION_KEY')
if not ENCRYPTION_KEY:
    print("‚ö†Ô∏è –í–ù–ò–ú–ê–ù–ò–ï: ENCRYPTION_KEY –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é")
    ENCRYPTION_KEY = "encryption-key-32-bytes-long!!!"

# –ü—É—Ç—å –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
DATABASE_PATH = os.getenv('DATABASE_PATH', 'transport_bot.db')
print(f"üìÅ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö: {DATABASE_PATH}")

# –°–ø–∏—Å–æ–∫ –∞–¥–º–∏–Ω–æ–≤ (–∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∏–∑ –ë–î –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ)
ADMINS = [MAIN_ADMIN] if MAIN_ADMIN else []

# –ö–ª–∞—Å—Å—ã –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π
CAR_CLASSES = {
    'economy': {'name': 'üöó –≠–∫–æ–Ω–æ–º', 'base_price': 17, 'min_price': 200, 'icon': 'üöó'},
    'comfort': {'name': 'üöò –ö–æ–º—Ñ–æ—Ä—Ç', 'base_price': 21, 'min_price': 300, 'icon': 'üöò'},
    'business': {'name': 'üöô –ë–∏–∑–Ω–µ—Å', 'base_price': 27, 'min_price': 500, 'icon': 'üöô'}
}

# –ì–æ—Ä–æ–¥–∞ –ö—Ä–∞—Å–Ω–æ–¥–∞—Ä—Å–∫–æ–≥–æ –∫—Ä–∞—è –∏ –ö—Ä—ã–º–∞
CITIES = [
    # –ö—Ä–∞—Å–Ω–æ–¥–∞—Ä—Å–∫–∏–π –∫—Ä–∞–π
    {'name': '–ö—Ä–∞—Å–Ω–æ–¥–∞—Ä', 'region': '–ö—Ä–∞—Å–Ω–æ–¥–∞—Ä—Å–∫–∏–π –∫—Ä–∞–π'},
    {'name': '–°–æ—á–∏', 'region': '–ö—Ä–∞—Å–Ω–æ–¥–∞—Ä—Å–∫–∏–π –∫—Ä–∞–π'},
    {'name': '–ù–æ–≤–æ—Ä–æ—Å—Å–∏–π—Å–∫', 'region': '–ö—Ä–∞—Å–Ω–æ–¥–∞—Ä—Å–∫–∏–π –∫—Ä–∞–π'},
    {'name': '–ê–Ω–∞–ø–∞', 'region': '–ö—Ä–∞—Å–Ω–æ–¥–∞—Ä—Å–∫–∏–π –∫—Ä–∞–π'},
    {'name': '–ì–µ–ª–µ–Ω–¥–∂–∏–∫', 'region': '–ö—Ä–∞—Å–Ω–æ–¥–∞—Ä—Å–∫–∏–π –∫—Ä–∞–π'},
    {'name': '–¢—É–∞–ø—Å–µ', 'region': '–ö—Ä–∞—Å–Ω–æ–¥–∞—Ä—Å–∫–∏–π –∫—Ä–∞–π'},
    {'name': '–ê—Ä–º–∞–≤–∏—Ä', 'region': '–ö—Ä–∞—Å–Ω–æ–¥–∞—Ä—Å–∫–∏–π –∫—Ä–∞–π'},
    {'name': '–ï–π—Å–∫', 'region': '–ö—Ä–∞—Å–Ω–æ–¥–∞—Ä—Å–∫–∏–π –∫—Ä–∞–π'},
    {'name': '–ö—Ä–æ–ø–æ—Ç–∫–∏–Ω', 'region': '–ö—Ä–∞—Å–Ω–æ–¥–∞—Ä—Å–∫–∏–π –∫—Ä–∞–π'},
    {'name': '–°–ª–∞–≤—è–Ω—Å–∫-–Ω–∞-–ö—É–±–∞–Ω–∏', 'region': '–ö—Ä–∞—Å–Ω–æ–¥–∞—Ä—Å–∫–∏–π –∫—Ä–∞–π'},
    {'name': '–¢–∏—Ö–æ—Ä–µ—Ü–∫', 'region': '–ö—Ä–∞—Å–Ω–æ–¥–∞—Ä—Å–∫–∏–π –∫—Ä–∞–π'},
    {'name': '–õ–∞–±–∏–Ω—Å–∫', 'region': '–ö—Ä–∞—Å–Ω–æ–¥–∞—Ä—Å–∫–∏–π –∫—Ä–∞–π'},
    {'name': '–ö—Ä—ã–º—Å–∫', 'region': '–ö—Ä–∞—Å–Ω–æ–¥–∞—Ä—Å–∫–∏–π –∫—Ä–∞–π'},
    {'name': '–¢–∏–º–∞—à–µ–≤—Å–∫', 'region': '–ö—Ä–∞—Å–Ω–æ–¥–∞—Ä—Å–∫–∏–π –∫—Ä–∞–π'},
    {'name': '–ë–µ–ª–æ—Ä–µ—á–µ–Ω—Å–∫', 'region': '–ö—Ä–∞—Å–Ω–æ–¥–∞—Ä—Å–∫–∏–π –∫—Ä–∞–π'},
    {'name': '–ö—É—Ä–≥–∞–Ω–∏–Ω—Å–∫', 'region': '–ö—Ä–∞—Å–Ω–æ–¥–∞—Ä—Å–∫–∏–π –∫—Ä–∞–π'},
    {'name': '–ö–æ—Ä–µ–Ω–æ–≤—Å–∫', 'region': '–ö—Ä–∞—Å–Ω–æ–¥–∞—Ä—Å–∫–∏–π –∫—Ä–∞–π'},
    {'name': '–ê–ø—à–µ—Ä–æ–Ω—Å–∫', 'region': '–ö—Ä–∞—Å–Ω–æ–¥–∞—Ä—Å–∫–∏–π –∫—Ä–∞–π'},
    {'name': '–¢–µ–º—Ä—é–∫', 'region': '–ö—Ä–∞—Å–Ω–æ–¥–∞—Ä—Å–∫–∏–π –∫—Ä–∞–π'},
    # –ö—Ä—ã–º
    {'name': '–°–∏–º—Ñ–µ—Ä–æ–ø–æ–ª—å', 'region': '–ö—Ä—ã–º'},
    {'name': '–°–µ–≤–∞—Å—Ç–æ–ø–æ–ª—å', 'region': '–ö—Ä—ã–º'},
    {'name': '–Ø–ª—Ç–∞', 'region': '–ö—Ä—ã–º'},
    {'name': '–ï–≤–ø–∞—Ç–æ—Ä–∏—è', 'region': '–ö—Ä—ã–º'},
    {'name': '–§–µ–æ–¥–æ—Å–∏—è', 'region': '–ö—Ä—ã–º'},
    {'name': '–ö–µ—Ä—á—å', 'region': '–ö—Ä—ã–º'},
    {'name': '–ê–ª—É—à—Ç–∞', 'region': '–ö—Ä—ã–º'},
    {'name': '–ë–∞—Ö—á–∏—Å–∞—Ä–∞–π', 'region': '–ö—Ä—ã–º'},
    {'name': '–°–∞–∫–∏', 'region': '–ö—Ä—ã–º'},
    {'name': '–î–∂–∞–Ω–∫–æ–π', 'region': '–ö—Ä—ã–º'},
    {'name': '–ö—Ä–∞—Å–Ω–æ–ø–µ—Ä–µ–∫–æ–ø—Å–∫', 'region': '–ö—Ä—ã–º'},
    {'name': '–ê—Ä–º—è–Ω—Å–∫', 'region': '–ö—Ä—ã–º'},
    {'name': '–°—É–¥–∞–∫', 'region': '–ö—Ä—ã–º'},
    {'name': '–ë–µ–ª–æ–≥–æ—Ä—Å–∫', 'region': '–ö—Ä—ã–º'},
    {'name': '–°—Ç–∞—Ä—ã–π –ö—Ä—ã–º', 'region': '–ö—Ä—ã–º'},
    {'name': '–©—ë–ª–∫–∏–Ω–æ', 'region': '–ö—Ä—ã–º'},
]

# –†–∞—Å—Å—Ç–æ—è–Ω–∏—è –º–µ–∂–¥—É –æ—Å–Ω–æ–≤–Ω—ã–º–∏ –≥–æ—Ä–æ–¥–∞–º–∏
DISTANCES = {
    ('–ö—Ä–∞—Å–Ω–æ–¥–∞—Ä', '–°–∏–º—Ñ–µ—Ä–æ–ø–æ–ª—å'): 500,
    ('–ö—Ä–∞—Å–Ω–æ–¥–∞—Ä', '–°–µ–≤–∞—Å—Ç–æ–ø–æ–ª—å'): 550,
    ('–ö—Ä–∞—Å–Ω–æ–¥–∞—Ä', '–Ø–ª—Ç–∞'): 580,
    ('–ö—Ä–∞—Å–Ω–æ–¥–∞—Ä', '–ï–≤–ø–∞—Ç–æ—Ä–∏—è'): 530,
    ('–ö—Ä–∞—Å–Ω–æ–¥–∞—Ä', '–§–µ–æ–¥–æ—Å–∏—è'): 420,
    ('–ö—Ä–∞—Å–Ω–æ–¥–∞—Ä', '–ö–µ—Ä—á—å'): 280,
    ('–°–æ—á–∏', '–°–∏–º—Ñ–µ—Ä–æ–ø–æ–ª—å'): 650,
    ('–°–æ—á–∏', '–°–µ–≤–∞—Å—Ç–æ–ø–æ–ª—å'): 700,
    ('–°–æ—á–∏', '–Ø–ª—Ç–∞'): 680,
    ('–ù–æ–≤–æ—Ä–æ—Å—Å–∏–π—Å–∫', '–°–∏–º—Ñ–µ—Ä–æ–ø–æ–ª—å'): 450,
    ('–ù–æ–≤–æ—Ä–æ—Å—Å–∏–π—Å–∫', '–ö–µ—Ä—á—å'): 220,
    ('–ê–Ω–∞–ø–∞', '–°–∏–º—Ñ–µ—Ä–æ–ø–æ–ª—å'): 400,
    ('–ê–Ω–∞–ø–∞', '–ö–µ—Ä—á—å'): 170,
    ('–ì–µ–ª–µ–Ω–¥–∂–∏–∫', '–°–∏–º—Ñ–µ—Ä–æ–ø–æ–ª—å'): 470,
    ('–ì–µ–ª–µ–Ω–¥–∂–∏–∫', '–ö–µ—Ä—á—å'): 240,
    ('–ö—Ä–∞—Å–Ω–æ–¥–∞—Ä', '–ê–Ω–∞–ø–∞'): 190,
    ('–ö—Ä–∞—Å–Ω–æ–¥–∞—Ä', '–ù–æ–≤–æ—Ä–æ—Å—Å–∏–π—Å–∫'): 160,
    ('–ö—Ä–∞—Å–Ω–æ–¥–∞—Ä', '–ì–µ–ª–µ–Ω–¥–∂–∏–∫'): 180,
    ('–ö—Ä–∞—Å–Ω–æ–¥–∞—Ä', '–°–æ—á–∏'): 290,
    ('–ö—Ä–∞—Å–Ω–æ–¥–∞—Ä', '–¢—É–∞–ø—Å–µ'): 200,
    ('–°–∏–º—Ñ–µ—Ä–æ–ø–æ–ª—å', '–Ø–ª—Ç–∞'): 80,
    ('–°–∏–º—Ñ–µ—Ä–æ–ø–æ–ª—å', '–°–µ–≤–∞—Å—Ç–æ–ø–æ–ª—å'): 70,
    ('–°–∏–º—Ñ–µ—Ä–æ–ø–æ–ª—å', '–ï–≤–ø–∞—Ç–æ—Ä–∏—è'): 65,
    ('–°–∏–º—Ñ–µ—Ä–æ–ø–æ–ª—å', '–§–µ–æ–¥–æ—Å–∏—è'): 115,
    ('–°–∏–º—Ñ–µ—Ä–æ–ø–æ–ª—å', '–ö–µ—Ä—á—å'): 210,
    ('–°–µ–≤–∞—Å—Ç–æ–ø–æ–ª—å', '–Ø–ª—Ç–∞'): 85,
}

# –°—Ü–µ–Ω–∞—Ä–∏–∏ –¥–ª—è –ø–µ—Å–æ—á–Ω–∏—Ü—ã
SANDBOX_SCENARIOS = [
    {
        'id': 'test_order',
        'name': 'üì¶ –¢–µ—Å—Ç–æ–≤—ã–π –∑–∞–∫–∞–∑',
        'description': '–°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –∑–∞–∫–∞–∑–∞ –∏ –ø–æ–∏—Å–∫ –≤–æ–¥–∏—Ç–µ–ª—è',
        'steps': 3
    },
    {
        'id': 'test_accept',
        'name': '‚úÖ –¢–µ—Å—Ç–æ–≤—ã–π –ø—Ä–∏—ë–º',
        'description': '–ü—Ä–∏–Ω—è—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π –∑–∞–∫–∞–∑ –∫–∞–∫ –≤–æ–¥–∏—Ç–µ–ª—å',
        'steps': 4
    }
]

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
DEFAULT_SETTINGS = {
    'subscription_price': '3500',
    'trial_days': '3',
    'commission': '10',
    'min_price': '200',
    'pickup_fee': '60',
    'waiting_free_minutes': '2',
    'waiting_rate_1': '3',
    'waiting_rate_2': '4',
    'waiting_rate_3': '5'
}

print("‚úÖ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∑–∞–≥—Ä—É–∂–µ–Ω–∞")
print(f"ü§ñ –¢–æ–∫–µ–Ω –±–æ—Ç–∞: {BOT_TOKEN[:10]}...")
print(f"üëë –ì–ª–∞–≤–Ω—ã–π –∞–¥–º–∏–Ω: {MAIN_ADMIN}")
